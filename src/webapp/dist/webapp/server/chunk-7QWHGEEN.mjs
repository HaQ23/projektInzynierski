import './polyfills.server.mjs';
import{G as n,Hc as l,J as a,M as o,e as c,ec as h}from"./chunk-LXPPITVW.mjs";var d=(()=>{let e=class e{constructor(t,i){this.http=t,this.router=i,this.baseUrl="/api/auth",this.user$=new c(null),this.activationSessionKey="pendingActivationEmail"}login(t){return this.http.post(`${this.baseUrl}/login`,t).pipe(n(i=>{this.user$.next(i)}))}register(t){return this.http.post(`${this.baseUrl}/register`,t)}logout(){return this.http.post(`${this.baseUrl}/logout`,{}).pipe(n(()=>{this.user$.next(null),this.router.navigate(["/auth/login"])}))}refreshToken(){return this.http.post(`${this.baseUrl}/refresh-token`,{})}autologin(){return this.http.get(`${this.baseUrl}/autologin`).pipe(n(t=>{console.log(t),this.user$.next(t)}))}resendActivationEmail(t){return this.http.post(`${this.baseUrl}/resend-activation`,t)}activateAccount(t){return this.http.get(`${this.baseUrl}/activate`,{params:{token:t}})}getUser(){return this.user$.asObservable()}isAuthenticated(){return!!this.user$.value}storePendingActivationSession(t){sessionStorage.setItem(this.activationSessionKey,t)}clearPendingActivationSession(){sessionStorage.removeItem(this.activationSessionKey)}getPendingActivationEmail(){return sessionStorage.getItem(this.activationSessionKey)}updateUser(t){this.user$.next(t),console.log(this.user$.value)}};e.\u0275fac=function(i){return new(i||e)(o(h),o(l))},e.\u0275prov=a({token:e,factory:e.\u0275fac,providedIn:"root"});let s=e;return s})();var I=(()=>{let e=class e{constructor(){this.instances={},this.activeInstance=null}openModal(t){let i=this.viewContainerRef.createComponent(t),r=i.instance;return this.getModalInstancesAmount()>0&&this.activeInstance&&this.activeInstance.componentRef.location.nativeElement.firstChild.firstChild.classList.add("modal-disabled"),this.activeInstance=r,this.activeInstance.componentRef=i,this.instances[this.getModalInstancesAmount()]=r,this.activeInstance}confirm(){this.activeInstance&&this.activeInstance.nextConfirm()}reject(){this.activeInstance&&this.activeInstance.nextReject()}close(){this.activeInstance&&this.deleteModal()}deleteModal(){this.activeInstance&&(this.activeInstance.componentRef.destroy(),delete this.instances[this.getModalInstancesAmount()-1],this.activeInstance=Object.values(this.instances).pop()||null,this.activeInstance&&this.activeInstance.componentRef.location.nativeElement.firstChild.firstChild.classList.remove("modal-disabled"))}getModalInstancesAmount(){return Object.keys(this.instances).length}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=a({token:e,factory:e.\u0275fac,providedIn:"root"});let s=e;return s})();export{d as a,I as b};
