import{A as G,B as J,C as K,D as Y,E as X,F as ee,G as te,H as ie,I as ne,J as oe,K as ht,L as gt,M as _t,N as T,O as j,P as ge,R as _e,T as A,V as Ct,a as N,b as V,c as he,e as Q,f as B,g as Z,h as k,i as Ue,j as F,k as We,l as Ve,m as Ae,n as Ze,o as pt,q as $e,r as dt,s as ft,t as D,u as He,v as ut,w as P,x as U,y as W,z as q}from"./chunk-BHXCVGPP.js";import{$a as de,$b as ct,Aa as f,Ca as d,Hb as Se,Ib as z,Kb as at,La as a,Lb as rt,M as je,Ma as r,Mb as lt,N as Le,Na as g,Oa as C,Ob as Ne,P as Re,Pa as y,Q as Je,Ra as R,U as _,Ua as h,V as ze,Wa as b,X as ce,Y as w,Yb as st,Z as x,Zb as we,_b as mt,a as be,ab as fe,ac as Ke,bb as ue,bc as Be,cb as Me,db as l,eb as E,fa as Pe,fb as $,g as Te,gb as ve,hb as M,ib as v,jb as S,mb as H,na as s,o as tt,oa as u,pb as Fe,qb as it,qc as O,sb as nt,tb as ot,ya as pe}from"./chunk-VSA3KCBE.js";var yt=(()=>{let o=class o{constructor(i,t){this.authService=i,this.router=t}logout(){this.authService.logout().subscribe(()=>{this.router.navigate(["/auth/login"])})}};o.\u0275fac=function(t){return new(t||o)(u(Be),u(we))},o.\u0275cmp=_({type:o,selectors:[["app-admin-dashboard"]],decls:36,vars:0,consts:[[1,"admin-dashboard"],[1,"wrapper"],[1,"admin-dashboard__title-box"],[1,"admin-dashboard__title"],[1,"admin-dashboard__subTitle"],[1,"main-content"],[1,"admin-sidebar"],[1,"admin-info"],[1,"admin-avatar"],["color","primary"],[1,"admin-name"],["routerLink","user-management","routerLinkActive","active"],["routerLink","reservation-management","routerLinkActive","active"],["routerLink","employee-management","routerLinkActive","active"],["routerLink","offer-management","routerLinkActive","active"],["routerLink","employee-offer-management","routerLinkActive","active"],[1,"nav__btn",3,"click"],[1,"admin-content"]],template:function(t,n){t&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),l(4,"PANEL ADMINISTRATORA"),r(),a(5,"h3",4),l(6,"Tw\xF3j panel administracyjny"),r()(),a(7,"main",5)(8,"nav",6)(9,"div",7)(10,"div",8)(11,"mat-icon",9),l(12,"admin_panel_settings"),r()(),a(13,"span",10),l(14,"Administrator"),r()(),a(15,"ul")(16,"li")(17,"a",11),l(18,"Zarz\u0105dzanie u\u017Cytkownikami"),r()(),a(19,"li")(20,"a",12),l(21,"Zarz\u0105dzanie rezerwacjami"),r()(),a(22,"li")(23,"a",13),l(24,"Zarz\u0105dzanie pracownikami"),r()(),a(25,"li")(26,"a",14),l(27,"Zarz\u0105dzanie oferami"),r()(),a(28,"li")(29,"a",15),l(30,"Oferty pracownik\xF3w"),r()(),a(31,"li")(32,"button",16),h("click",function(){return n.logout()}),l(33,"Wyloguj si\u0119"),r()()()(),a(34,"div",17),g(35,"router-outlet"),r()()()())},dependencies:[st,mt,ct,V],styles:[".admin-dashboard[_ngcontent-%COMP%]{padding:20px}.admin-dashboard[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]{max-width:1600px;margin:0 auto}.admin-dashboard__title-box[_ngcontent-%COMP%]{margin:40px 0;border-bottom:2px solid #b7a379}.admin-dashboard__title[_ngcontent-%COMP%]{margin-bottom:.75rem;font-size:1.8rem;font-family:Jost,sans-serif;color:#b7a379;font-weight:700}.admin-dashboard__subTitle[_ngcontent-%COMP%]{margin-bottom:2rem;font-size:2.2rem;font-weight:700;font-family:Jost,sans-serif}.admin-dashboard[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]{display:flex;flex-direction:column}.admin-dashboard[_ngcontent-%COMP%]   .admin-sidebar[_ngcontent-%COMP%]{padding:20px 0}.admin-dashboard[_ngcontent-%COMP%]   .admin-sidebar[_ngcontent-%COMP%]   .admin-info[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;gap:10px;align-items:center;margin-bottom:20px}.admin-dashboard[_ngcontent-%COMP%]   .admin-sidebar[_ngcontent-%COMP%]   .admin-info[_ngcontent-%COMP%]   .admin-avatar[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;background-color:#b7a37933;width:42px;min-width:42px;height:42px;border-radius:60%}.admin-dashboard[_ngcontent-%COMP%]   .admin-sidebar[_ngcontent-%COMP%]   .admin-info[_ngcontent-%COMP%]   .admin-name[_ngcontent-%COMP%]{font-size:1.8rem;color:#333}.admin-dashboard[_ngcontent-%COMP%]   .admin-sidebar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0}.admin-dashboard[_ngcontent-%COMP%]   .admin-sidebar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:5px}.admin-dashboard[_ngcontent-%COMP%]   .admin-sidebar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .admin-dashboard[_ngcontent-%COMP%]   .admin-sidebar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{text-decoration:none;color:#333;font-weight:700;display:block;padding:10px 10px 10px 20px;border-left:4px solid transparent;border-radius:4px;transition:background-color .3s,border-color .3s}.admin-dashboard[_ngcontent-%COMP%]   .admin-sidebar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .admin-dashboard[_ngcontent-%COMP%]   .admin-sidebar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}.admin-dashboard[_ngcontent-%COMP%]   .admin-sidebar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%], .admin-dashboard[_ngcontent-%COMP%]   .admin-sidebar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background-color:#f0e6d2;color:#b7a379;font-weight:700;border-left:4px solid #b7a379}.admin-dashboard[_ngcontent-%COMP%]   .admin-sidebar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;background-color:transparent;width:100%;text-align:left;cursor:pointer}@media (min-width: 992px){.admin-dashboard[_ngcontent-%COMP%]{width:100%;overflow-x:hidden}.admin-dashboard__title[_ngcontent-%COMP%]{font-size:1.8rem}.admin-dashboard__subTitle[_ngcontent-%COMP%]{font-size:2.8rem}.admin-dashboard[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:flex-start;width:100%}.admin-dashboard[_ngcontent-%COMP%]   .admin-sidebar[_ngcontent-%COMP%]{width:max-content;min-height:50vh}.admin-dashboard[_ngcontent-%COMP%]   .admin-content[_ngcontent-%COMP%]{padding:20px 0;margin-left:60px;flex:1}.admin-dashboard[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{min-width:max-content;width:100%}}"]});let e=o;return e})();var L=(()=>{let o=class o{constructor(i){this.http=i,this.apiUrl="/api"}getEmployees(){return this.http.get(`${this.apiUrl}/employee`)}getAllReservationsForEmployee(i){return this.http.get(`${this.apiUrl}/reservations/employee/${i}`)}getReservationsForEmployeeWithDateRange(i,t,n){return this.http.get(`${this.apiUrl}/reservations/employee/${i}`,{params:{startDate:t,endDate:n}})}cancelReservationByAdmin(i){return this.http.put(`${this.apiUrl}/reservations/admin/cancel/${i}`,{})}deleteReservation(i){return this.http.delete(`${this.apiUrl}/reservations/${i}`)}getAllUsers(){return this.http.get(`${this.apiUrl}/user-management`)}blockUser(i){return this.http.put(`${this.apiUrl}/user-management/block/${i}`,{})}unblockUser(i){return this.http.put(`${this.apiUrl}/user-management/unblock/${i}`,{})}getAllOffers(){return this.http.get(`${this.apiUrl}/offer`)}deleteOffer(i){return this.http.delete(`${this.apiUrl}/offer/${i}`)}updateOffer(i){return this.http.put(`${this.apiUrl}/offer/${i.id}`,i)}addOffer(i){return this.http.post(`${this.apiUrl}/offer`,i)}getEmployeesDetails(){return this.http.get(`${this.apiUrl}/employee/details`)}addEmployee(i){return this.http.post(`${this.apiUrl}/employee`,i)}updateEmployee(i){return this.http.put(`${this.apiUrl}/employee/${i.id}`,i)}deleteEmployee(i){return this.http.delete(`${this.apiUrl}/employee/${i}`)}};o.\u0275fac=function(t){return new(t||o)(Re(Ne))},o.\u0275prov=je({token:o,factory:o.\u0275fac,providedIn:"root"});let e=o;return e})();var bt=(()=>{let o=class o{constructor(){this.users=[],this.filteredUsers=new Pe,this.selectedStatus="",this.usernameSearch="",this.emailSearch=""}applyFilters(){let i=this.users;if(this.selectedStatus&&(i=i.filter(t=>(t.enabled?"enabled":"disabled")===this.selectedStatus)),this.usernameSearch){let t=this.usernameSearch.toLowerCase();i=i.filter(n=>n.username.toLowerCase().includes(t))}if(this.emailSearch){let t=this.emailSearch.toLowerCase();i=i.filter(n=>n.email.toLowerCase().includes(t))}this.filteredUsers.emit(i)}};o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=_({type:o,selectors:[["app-user-filter"]],inputs:{users:"users"},outputs:{filteredUsers:"filteredUsers"},decls:19,vars:3,consts:[[1,"filter-controls"],["appearance","outline"],["matInput","","placeholder","Wpisz nazw\u0119 u\u017Cytkownika",3,"ngModelChange","ngModel"],["matInput","","placeholder","Wpisz email",3,"ngModelChange","ngModel"],[3,"ngModelChange","selectionChange","ngModel"],["value",""],["value","enabled"],["value","disabled"]],template:function(t,n){t&1&&(a(0,"div",0)(1,"mat-form-field",1)(2,"mat-label"),l(3,"Wyszukaj u\u017Cytkownika"),r(),a(4,"input",2),S("ngModelChange",function(c){return v(n.usernameSearch,c)||(n.usernameSearch=c),c}),h("ngModelChange",function(){return n.applyFilters()}),r()(),a(5,"mat-form-field",1)(6,"mat-label"),l(7,"Wyszukaj email"),r(),a(8,"input",3),S("ngModelChange",function(c){return v(n.emailSearch,c)||(n.emailSearch=c),c}),h("ngModelChange",function(){return n.applyFilters()}),r()(),a(9,"mat-form-field",1)(10,"mat-label"),l(11,"Filtruj po statusie"),r(),a(12,"mat-select",4),S("ngModelChange",function(c){return v(n.selectedStatus,c)||(n.selectedStatus=c),c}),h("selectionChange",function(){return n.applyFilters()}),a(13,"mat-option",5),l(14,"Wszystkie"),r(),a(15,"mat-option",6),l(16,"Aktywne"),r(),a(17,"mat-option",7),l(18,"Zablokowane"),r()()()()),t&2&&(s(4),M("ngModel",n.usernameSearch),s(4),M("ngModel",n.emailSearch),s(4),M("ngModel",n.selectedStatus))},dependencies:[P,D,U,W,N,B,k,F],styles:["mat-form-field[_ngcontent-%COMP%]{flex:1;min-width:200px}.filter-controls[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:16px;align-items:center;margin-bottom:16px}"]});let e=o;return e})();function Vt(e,o){e&1&&(a(0,"th",23),l(1,"Nazwa u\u017Cytkownika"),r())}function At(e,o){if(e&1&&(a(0,"td",24),l(1),r()),e&2){let m=o.$implicit;s(),E(m.username)}}function Zt(e,o){e&1&&(a(0,"th",23),l(1,"Imi\u0119"),r())}function $t(e,o){if(e&1&&(a(0,"td",24),l(1),r()),e&2){let m=o.$implicit;s(),E(m.firstname)}}function Ht(e,o){e&1&&(a(0,"th",23),l(1,"Nazwisko"),r())}function Qt(e,o){if(e&1&&(a(0,"td",24),l(1),r()),e&2){let m=o.$implicit;s(),E(m.lastname)}}function qt(e,o){e&1&&(a(0,"th",23),l(1,"Email"),r())}function Gt(e,o){if(e&1&&(a(0,"td",24),l(1),r()),e&2){let m=o.$implicit;s(),E(m.email)}}function Jt(e,o){e&1&&(a(0,"th",23),l(1,"Numer telefonu"),r())}function Kt(e,o){if(e&1&&(a(0,"td",24),l(1),r()),e&2){let m=o.$implicit;s(),E(m.phoneNumber)}}function Yt(e,o){e&1&&(a(0,"th",23),l(1,"Adres"),r())}function Xt(e,o){if(e&1&&(a(0,"td",24),l(1),r()),e&2){let m=o.$implicit;s(),E(m.address)}}function ei(e,o){e&1&&(a(0,"th",23),l(1,"Status"),r())}function ti(e,o){if(e&1&&(a(0,"td",24),l(1),r()),e&2){let m=o.$implicit;s(),$(" ",m.enabled?"Aktywne":"Zablokowane"," ")}}function ii(e,o){e&1&&(a(0,"th",23),l(1,"Liczba rezerwacji"),r())}function ni(e,o){if(e&1&&(a(0,"td",24),l(1),r()),e&2){let m=o.$implicit;s(),E(m.reservationCount)}}function oi(e,o){e&1&&(a(0,"th",23),l(1,"Akcje"),r())}function ai(e,o){if(e&1){let m=R();a(0,"button",27),h("click",function(){w(m);let t=b().$implicit,n=b();return x(n.blockUser(t.id))}),a(1,"mat-icon"),l(2,"lock"),r()()}}function ri(e,o){if(e&1){let m=R();a(0,"button",28),h("click",function(){w(m);let t=b().$implicit,n=b();return x(n.unblockUser(t.id))}),a(1,"mat-icon"),l(2,"lock_open"),r()()}}function li(e,o){if(e&1&&(a(0,"td",24),f(1,ai,3,0,"button",25)(2,ri,3,0,"button",26),r()),e&2){let m=o.$implicit;s(),d("ngIf",m.enabled),s(),d("ngIf",!m.enabled)}}function si(e,o){e&1&&g(0,"tr",29)}function mi(e,o){e&1&&g(0,"tr",30)}function ci(e,o){e&1&&(a(0,"div",31),l(1," Brak danych do wy\u015Bwietlenia. "),r())}var Mt=(()=>{let o=class o{constructor(i,t,n){this.adminService=i,this.snackBar=t,this.modalService=n,this.users=[],this.displayedColumns=["username","firstname","lastname","email","phoneNumber","address","status","reservationCount","actions"],this.dataSource=new oe([]),this.selectedSort=""}ngOnChanges(){this.dataSource.data=this.users,this.paginator&&(this.dataSource.paginator=this.paginator)}blockUser(i){let t=this.modalService.openModal(A);t.componentRef.instance.message="Czy na pewno chcesz zablokowa\u0107 to konto?",t.subject$.subscribe(n=>{n&&this.adminService.blockUser(i).subscribe({next:()=>{this.snackBar.open("Konto zosta\u0142o zablokowane","Zamknij",{duration:3e3}),this.updateUserStatus(i,!1)},error:()=>{this.snackBar.open("Nie uda\u0142o si\u0119 zablokowa\u0107 konta","Zamknij",{duration:3e3,panelClass:["snackbar-error"]})}})})}unblockUser(i){let t=this.modalService.openModal(A);t.componentRef.instance.message="Czy na pewno chcesz odblokowa\u0107 to konto?",t.subject$.subscribe(n=>{n&&this.adminService.unblockUser(i).subscribe({next:()=>{this.snackBar.open("Konto zosta\u0142o odblokowane","Zamknij",{duration:3e3}),this.updateUserStatus(i,!0)},error:()=>{this.snackBar.open("Nie uda\u0142o si\u0119 odblokowa\u0107 konta","Zamknij",{duration:3e3,panelClass:["snackbar-error"]})}})})}updateUserStatus(i,t){let n=this.users.find(p=>p.id===i);n&&(n.enabled=t,this.dataSource.data=[...this.users])}sortUsers(){switch(this.selectedSort){case"firstname":this.dataSource.data=this.users.sort((i,t)=>i.firstname.localeCompare(t.firstname));break;case"lastname":this.dataSource.data=this.users.sort((i,t)=>i.lastname.localeCompare(t.lastname));break;case"reservationCount":this.dataSource.data=this.users.sort((i,t)=>i.reservationCount-t.reservationCount);break}}};o.\u0275fac=function(t){return new(t||o)(u(L),u(T),u(O))},o.\u0275cmp=_({type:o,selectors:[["app-user-list"]],viewQuery:function(t,n){if(t&1&&de(j,5),t&2){let p;fe(p=ue())&&(n.paginator=p.first)}},inputs:{users:"users"},features:[ce],decls:44,vars:7,consts:[[1,"sort-controls"],["appearance","outline"],[3,"ngModelChange","selectionChange","ngModel"],["value","firstname"],["value","lastname"],["value","reservationCount"],[1,"mat-elevation-z8","scrollable-table"],["mat-table","",3,"dataSource"],["matColumnDef","username"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","firstname"],["matColumnDef","lastname"],["matColumnDef","email"],["matColumnDef","phoneNumber"],["matColumnDef","address"],["matColumnDef","status"],["matColumnDef","reservationCount"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","no-data-message",4,"ngIf"],[3,"length","pageSize"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","","color","warn",3,"click",4,"ngIf"],["mat-icon-button","","color","primary",3,"click",4,"ngIf"],["mat-icon-button","","color","warn",3,"click"],["mat-icon-button","","color","primary",3,"click"],["mat-header-row",""],["mat-row",""],[1,"no-data-message"]],template:function(t,n){t&1&&(a(0,"div",0)(1,"mat-form-field",1)(2,"mat-label"),l(3,"Sortuj wed\u0142ug"),r(),a(4,"mat-select",2),S("ngModelChange",function(c){return v(n.selectedSort,c)||(n.selectedSort=c),c}),h("selectionChange",function(){return n.sortUsers()}),a(5,"mat-option",3),l(6,"Imi\u0119"),r(),a(7,"mat-option",4),l(8,"Nazwisko"),r(),a(9,"mat-option",5),l(10,"Liczba rezerwacji"),r()()()(),a(11,"div",6)(12,"table",7),C(13,8),f(14,Vt,2,0,"th",9)(15,At,2,1,"td",10),y(),C(16,11),f(17,Zt,2,0,"th",9)(18,$t,2,1,"td",10),y(),C(19,12),f(20,Ht,2,0,"th",9)(21,Qt,2,1,"td",10),y(),C(22,13),f(23,qt,2,0,"th",9)(24,Gt,2,1,"td",10),y(),C(25,14),f(26,Jt,2,0,"th",9)(27,Kt,2,1,"td",10),y(),C(28,15),f(29,Yt,2,0,"th",9)(30,Xt,2,1,"td",10),y(),C(31,16),f(32,ei,2,0,"th",9)(33,ti,2,1,"td",10),y(),C(34,17),f(35,ii,2,0,"th",9)(36,ni,2,1,"td",10),y(),C(37,18),f(38,oi,2,0,"th",9)(39,li,3,2,"td",10),y(),f(40,si,1,0,"tr",19)(41,mi,1,0,"tr",20),r(),f(42,ci,2,0,"div",21),g(43,"mat-paginator",22),r()),t&2&&(s(4),M("ngModel",n.selectedSort),s(8),d("dataSource",n.dataSource),s(28),d("matHeaderRowDef",n.displayedColumns),s(),d("matRowDefColumns",n.displayedColumns),s(),d("ngIf",n.dataSource.data.length===0),s(),d("length",n.dataSource.data.length)("pageSize",5))},dependencies:[z,V,Q,P,D,W,N,q,J,ee,K,G,te,Y,X,ie,ne,j,k,F],styles:[".scrollable-table[_ngcontent-%COMP%]{overflow-x:auto;margin-bottom:20px}.scrollable-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{table-layout:auto}.scrollable-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .scrollable-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{white-space:nowrap;width:max-content}.scrollable-table[_ngcontent-%COMP%]::-webkit-scrollbar{height:8px}.scrollable-table[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:10px}.scrollable-table[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#888;border-radius:10px}.scrollable-table[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#555}.no-data-message[_ngcontent-%COMP%]{text-align:center;color:gray;font-style:italic;font-size:16px;margin-top:20px}@media (min-width: 992px){.scrollable-table[_ngcontent-%COMP%]{max-width:calc(100vw - 341px)}}"]});let e=o;return e})();var vt=(()=>{let o=class o{constructor(i,t){this.adminService=i,this.snackBar=t,this.users=[],this.filteredUsers=[]}ngOnInit(){this.getAllUsers()}getAllUsers(){this.adminService.getAllUsers().subscribe({next:i=>{this.users=i,this.filteredUsers=i},error:()=>{this.snackBar.open("Nie uda\u0142o si\u0119 pobra\u0107 u\u017Cytkownik\xF3w","Zamknij",{duration:3e3,panelClass:["snackbar-error"]})}})}onFilterChange(i){this.filteredUsers=i}};o.\u0275fac=function(t){return new(t||o)(u(L),u(T))},o.\u0275cmp=_({type:o,selectors:[["app-user-management"]],decls:6,vars:2,consts:[[1,"user-management"],[1,"user-management__header"],[1,"user-management__title"],[3,"filteredUsers","users"],[3,"users"]],template:function(t,n){t&1&&(a(0,"div",0)(1,"div",1)(2,"h2",2),l(3,"Zarz\u0105dzanie u\u017Cytkownikami"),r()(),a(4,"app-user-filter",3),h("filteredUsers",function(c){return n.onFilterChange(c)}),r(),g(5,"app-user-list",4),r()),t&2&&(s(4),d("users",n.users),s(),d("users",n.filteredUsers))},dependencies:[bt,Mt],styles:[".user-management__title[_ngcontent-%COMP%]{font-family:Jost,sans-serif;font-size:2.4rem;font-weight:700;margin-bottom:40px}"]});let e=o;return e})();var di=()=>[5,10,20];function fi(e,o){e&1&&(a(0,"th",14),l(1,"Oferta"),r())}function ui(e,o){if(e&1&&(a(0,"td",15),l(1),r()),e&2){let m=o.$implicit;s(),$(" ",m.offerName," ")}}function hi(e,o){e&1&&(a(0,"th",14),l(1,"Data"),r())}function gi(e,o){if(e&1&&(a(0,"td",15),l(1),Fe(2,"date"),r()),e&2){let m=o.$implicit;s(),$(" ",it(2,1,m.reservationDate,"dd-MM-yyyy")," ")}}function _i(e,o){e&1&&(a(0,"th",14),l(1,"Godzina"),r())}function Ci(e,o){if(e&1&&(a(0,"td",15),l(1),r()),e&2){let m=o.$implicit,i=b();s(),$(" ",i.getReservationTimeRange(m)," ")}}function yi(e,o){e&1&&(a(0,"th",14),l(1,"U\u017Cytkownik"),r())}function bi(e,o){if(e&1&&(a(0,"td",15),l(1),r()),e&2){let m=o.$implicit;s(),ve(" ",m.userFirstName," ",m.userLastName," ")}}function Mi(e,o){e&1&&(a(0,"th",14),l(1,"Status"),r())}function vi(e,o){if(e&1&&(a(0,"td",15),l(1),r()),e&2){let m=o.$implicit;s(),E(m.status)}}function Si(e,o){e&1&&(a(0,"th",14),l(1,"Akcje"),r())}function wi(e,o){if(e&1){let m=R();a(0,"td",15)(1,"button",16),h("click",function(){let t=w(m).$implicit,n=b();return x(n.cancelReservation(t.id))}),a(2,"mat-icon"),l(3,"cancel"),r()(),a(4,"button",17),h("click",function(){let t=w(m).$implicit,n=b();return x(n.deleteReservation(t.id))}),a(5,"mat-icon"),l(6,"delete"),r()()()}}function xi(e,o){e&1&&g(0,"tr",18)}function Oi(e,o){e&1&&g(0,"tr",19)}function Ei(e,o){e&1&&(a(0,"div",20),l(1," Brak danych do wy\u015Bwietlenia. "),r())}var St=(()=>{let o=class o{constructor(i,t,n){this.adminService=i,this.snackBar=t,this.modalService=n,this.reservations=[],this.displayedColumns=["offer","date","time","user","status","actions"],this.dataSource=new oe([])}ngOnChanges(){this.dataSource.data=this.reservations,this.paginator&&(this.dataSource.paginator=this.paginator)}deleteReservation(i){let t=this.modalService.openModal(A);t.componentRef.instance.message="Czy na pewno chcesz usun\u0105\u0107 t\u0119 rezerwacj\u0119?",t.subject$.subscribe(n=>{n&&this.adminService.deleteReservation(i).subscribe({next:()=>{this.snackBar.open("Rezerwacja zosta\u0142a usuni\u0119ta","Zamknij",{duration:3e3}),this.reservations=this.reservations.filter(p=>p.id!==i),this.dataSource.data=this.reservations},error:()=>{this.snackBar.open("Nie uda\u0142o si\u0119 usun\u0105\u0107 rezerwacji","Zamknij",{duration:3e3})}})})}cancelReservation(i){let t=this.reservations.find(p=>p.id===i);if(t?.status!=="oczekujaca"){this.snackBar.open(`Nie mo\u017Cesz anulowa\u0107 rezerwacji o statusie ${t?.status}`,"Zamknij",{duration:3e3,panelClass:["snackbar-error"]});return}let n=this.modalService.openModal(A);n.componentRef.instance.message="Czy na pewno chcesz anulowa\u0107 t\u0119 rezerwacj\u0119?",n.subject$.subscribe(p=>{p&&this.adminService.cancelReservationByAdmin(i).subscribe({next:()=>{this.snackBar.open("Rezerwacja zosta\u0142a anulowana","Zamknij",{duration:3e3}),t&&(t.status="anulowana"),this.dataSource.data=[...this.reservations]},error:()=>{this.snackBar.open("Nie uda\u0142o si\u0119 anulowa\u0107 rezerwacji","Zamknij",{duration:3e3})}})})}getReservationTimeRange(i){let t=i.reservationTime,n=i.duration,[p,c]=t.split(":").map(Number),re=new Date;re.setHours(p,c,0);let De=new Date(re.getTime()+n*6e4),Ft=De.getHours().toString().padStart(2,"0"),Nt=De.getMinutes().toString().padStart(2,"0");return`${t} - ${Ft}:${Nt}`}};o.\u0275fac=function(t){return new(t||o)(u(L),u(T),u(O))},o.\u0275cmp=_({type:o,selectors:[["app-reservation-list"]],viewQuery:function(t,n){if(t&1&&de(j,5),t&2){let p;fe(p=ue())&&(n.paginator=p.first)}},inputs:{reservations:"reservations"},features:[ce],decls:24,vars:9,consts:[[1,"mat-elevation-z8","scrollable-table"],["mat-table","",3,"dataSource"],["matColumnDef","offer"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","date"],["matColumnDef","time"],["matColumnDef","user"],["matColumnDef","status"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","no-data-message",4,"ngIf"],[3,"length","pageSize","pageSizeOptions","showFirstLastButtons"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","","color","info",3,"click"],["mat-icon-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""],[1,"no-data-message"]],template:function(t,n){t&1&&(a(0,"div",0)(1,"table",1),C(2,2),f(3,fi,2,0,"th",3)(4,ui,2,1,"td",4),y(),C(5,5),f(6,hi,2,0,"th",3)(7,gi,3,4,"td",4),y(),C(8,6),f(9,_i,2,0,"th",3)(10,Ci,2,1,"td",4),y(),C(11,7),f(12,yi,2,0,"th",3)(13,bi,2,2,"td",4),y(),C(14,8),f(15,Mi,2,0,"th",3)(16,vi,2,1,"td",4),y(),C(17,9),f(18,Si,2,0,"th",3)(19,wi,7,0,"td",4),y(),f(20,xi,1,0,"tr",10)(21,Oi,1,0,"tr",11),r(),f(22,Ei,2,0,"div",12),g(23,"mat-paginator",13),r()),t&2&&(s(),d("dataSource",n.dataSource),s(19),d("matHeaderRowDef",n.displayedColumns),s(),d("matRowDefColumns",n.displayedColumns),s(),d("ngIf",n.dataSource.data.length===0),s(),d("length",n.dataSource.data.length)("pageSize",5)("pageSizeOptions",H(8,di))("showFirstLastButtons",!0))},dependencies:[z,V,Q,q,J,ee,K,G,te,Y,X,ie,ne,j,at],styles:[".scrollable-table[_ngcontent-%COMP%]{overflow-x:auto;margin-bottom:20px}.scrollable-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;table-layout:auto;box-sizing:border-box}.scrollable-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .scrollable-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{white-space:nowrap;width:max-content}.scrollable-table[_ngcontent-%COMP%]::-webkit-scrollbar{height:8px}.scrollable-table[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:10px}.scrollable-table[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#888;border-radius:10px}.scrollable-table[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#555}.no-data-message[_ngcontent-%COMP%]{text-align:center;color:gray;font-style:italic;font-size:16px;margin-top:20px}@media (min-width: 992px){.scrollable-table[_ngcontent-%COMP%]{max-width:calc(100vw - 341px)}}"]});let e=o;return e})();function Di(e,o){if(e&1&&(a(0,"mat-option",23),l(1),r()),e&2){let m=o.$implicit;d("value",m.id),s(),ve(" ",m.firstName," ",m.lastName," ")}}function Pi(e,o){if(e&1){let m=R();a(0,"div",24)(1,"mat-form-field",7)(2,"mat-label"),l(3,"Wybierz dat\u0119"),r(),a(4,"input",25),S("ngModelChange",function(t){w(m);let n=b();return v(n.selectedDate,t)||(n.selectedDate=t),x(t)}),h("ngModelChange",function(){w(m);let t=b();return x(t.onDateChange())}),r(),g(5,"mat-datepicker-toggle",26)(6,"mat-datepicker",null,0),r()()}if(e&2){let m=Me(7),i=b();s(4),d("matDatepicker",m),M("ngModel",i.selectedDate),s(),d("for",m)}}function Ii(e,o){if(e&1){let m=R();a(0,"div",27)(1,"mat-form-field",7)(2,"mat-label"),l(3,"Data pocz\u0105tkowa"),r(),a(4,"input",25),S("ngModelChange",function(t){w(m);let n=b();return v(n.startDate,t)||(n.startDate=t),x(t)}),h("ngModelChange",function(){w(m);let t=b();return x(t.onDateRangeChange())}),r(),g(5,"mat-datepicker-toggle",26)(6,"mat-datepicker",null,1),r(),a(8,"mat-form-field",7)(9,"mat-label"),l(10,"Data ko\u0144cowa"),r(),a(11,"input",25),S("ngModelChange",function(t){w(m);let n=b();return v(n.endDate,t)||(n.endDate=t),x(t)}),h("ngModelChange",function(){w(m);let t=b();return x(t.onDateRangeChange())}),r(),g(12,"mat-datepicker-toggle",26)(13,"mat-datepicker",null,2),r()()}if(e&2){let m=Me(7),i=Me(14),t=b();s(4),d("matDatepicker",m),M("ngModel",t.startDate),s(),d("for",m),s(6),d("matDatepicker",i),M("ngModel",t.endDate),s(),d("for",i)}}var wt=(()=>{let o=class o{constructor(i,t){this.adminService=i,this.snackBar=t,this.reservations=[],this.employees=[],this.filteredReservations=new oe([]),this.selectedEmployeeId=null,this.selectedDate=new Date,this.startDate=null,this.endDate=null,this.filterOption="specificDay",this.selectedStatus="",this.clientSearch="",this.offerSearch=""}ngOnInit(){this.getEmployees()}getEmployees(){this.adminService.getEmployees().subscribe({next:i=>{this.employees=i,i.length>0&&(this.selectedEmployeeId=i[0].id,this.fetchReservationsForEmployee())},error:()=>{this.snackBar.open("Nie uda\u0142o si\u0119 pobra\u0107 pracownik\xF3w","Zamknij",{duration:3e3,panelClass:["snackbar-error"]})}})}fetchReservationsForEmployee(){if(this.selectedEmployeeId!==null){if(this.filterOption==="all")this.adminService.getAllReservationsForEmployee(this.selectedEmployeeId).subscribe({next:i=>{this.reservations=i,this.sortReservationsByDate(),this.applyFilters()},error:()=>{this.snackBar.open("Nie uda\u0142o si\u0119 pobra\u0107 rezerwacji","Zamknij",{duration:3e3,panelClass:["snackbar-error"]})}});else if(this.filterOption==="specificDay"&&this.selectedDate){let i=this.formatDateToLocalString(this.selectedDate),t=i;this.adminService.getReservationsForEmployeeWithDateRange(this.selectedEmployeeId,i,t).subscribe({next:n=>{this.reservations=n,this.sortReservationsByDate(),this.applyFilters()},error:()=>{this.snackBar.open("Nie uda\u0142o si\u0119 pobra\u0107 rezerwacji","Zamknij",{duration:3e3,panelClass:["snackbar-error"]})}})}else if(this.filterOption==="dateRange"&&this.startDate&&this.endDate){let i=this.formatDateToLocalString(this.startDate),t=this.formatDateToLocalString(this.endDate);this.adminService.getReservationsForEmployeeWithDateRange(this.selectedEmployeeId,i,t).subscribe({next:n=>{this.reservations=n,this.sortReservationsByDate(),this.applyFilters()},error:()=>{this.snackBar.open("Nie uda\u0142o si\u0119 pobra\u0107 rezerwacji","Zamknij",{duration:3e3,panelClass:["snackbar-error"]})}})}}}formatDateToLocalString(i){let t=i.getFullYear(),n=(i.getMonth()+1).toString().padStart(2,"0"),p=i.getDate().toString().padStart(2,"0");return`${t}-${n}-${p}`}sortReservationsByDate(){this.reservations.sort((i,t)=>new Date(t.reservationDate).getTime()-new Date(i.reservationDate).getTime())}onDateChange(){this.filterOption==="specificDay"&&this.selectedDate&&this.fetchReservationsForEmployee()}onDateRangeChange(){this.filterOption==="dateRange"&&this.startDate&&this.endDate&&this.fetchReservationsForEmployee()}onFilterOptionChange(){this.fetchReservationsForEmployee()}applyFilters(){let i=this.reservations;if(this.selectedStatus&&(i=i.filter(t=>t.status===this.selectedStatus)),this.clientSearch){let t=this.clientSearch.toLowerCase();i=i.filter(n=>(n.userFirstName?.toLowerCase()??"").includes(t)||(n.userLastName?.toLowerCase()??"").includes(t))}if(this.offerSearch){let t=this.offerSearch.toLowerCase();i=i.filter(n=>n.offerName?.toLowerCase().includes(t))}this.filteredReservations.data=i}};o.\u0275fac=function(t){return new(t||o)(u(L),u(T))},o.\u0275cmp=_({type:o,selectors:[["app-reservation-management"]],decls:44,vars:9,consts:[["specificDatePicker",""],["startDatePicker",""],["endDatePicker",""],[1,"reservation-management"],[1,"reservation-management__header"],[1,"reservation-management__title"],[1,"filter-controls"],["appearance","outline"],[3,"ngModelChange","selectionChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["value",""],["value","oczekujaca"],["value","anulowana"],["value","zako\u0144czona"],["matInput","","placeholder","Wpisz imi\u0119 lub nazwisko",3,"ngModelChange","ngModel"],["matInput","","placeholder","Wpisz nazw\u0119 us\u0142ugi",3,"ngModelChange","ngModel"],[1,"filter-controls","filter-controls--date"],["value","all"],["value","specificDay"],["value","dateRange"],["class","specific-date",4,"ngIf"],["class","date-range",4,"ngIf"],[3,"reservations"],[3,"value"],[1,"specific-date"],["matInput","",3,"ngModelChange","matDatepicker","ngModel"],["matSuffix","",3,"for"],[1,"date-range"]],template:function(t,n){t&1&&(a(0,"div",3)(1,"div",4)(2,"h2",5),l(3,"Zarz\u0105dzanie rezerwacjami"),r(),a(4,"div",6)(5,"mat-form-field",7)(6,"mat-label"),l(7,"Wybierz pracownika"),r(),a(8,"mat-select",8),S("ngModelChange",function(c){return v(n.selectedEmployeeId,c)||(n.selectedEmployeeId=c),c}),h("selectionChange",function(){return n.fetchReservationsForEmployee()}),f(9,Di,2,3,"mat-option",9),r()(),a(10,"mat-form-field",7)(11,"mat-label"),l(12,"Filtruj po statusie"),r(),a(13,"mat-select",8),S("ngModelChange",function(c){return v(n.selectedStatus,c)||(n.selectedStatus=c),c}),h("selectionChange",function(){return n.applyFilters()}),a(14,"mat-option",10),l(15,"Wszystkie"),r(),a(16,"mat-option",11),l(17,"Oczekuj\u0105ce"),r(),a(18,"mat-option",12),l(19,"Anulowana"),r(),a(20,"mat-option",13),l(21,"Zako\u0144czona"),r()()(),a(22,"mat-form-field",7)(23,"mat-label"),l(24,"Wyszukaj klienta"),r(),a(25,"input",14),S("ngModelChange",function(c){return v(n.clientSearch,c)||(n.clientSearch=c),c}),h("ngModelChange",function(){return n.applyFilters()}),r()(),a(26,"mat-form-field",7)(27,"mat-label"),l(28,"Wyszukaj us\u0142ug\u0119"),r(),a(29,"input",15),S("ngModelChange",function(c){return v(n.offerSearch,c)||(n.offerSearch=c),c}),h("ngModelChange",function(){return n.applyFilters()}),r()()(),a(30,"div",16)(31,"mat-form-field",7)(32,"mat-label"),l(33,"Wybierz zakres dat"),r(),a(34,"mat-select",8),S("ngModelChange",function(c){return v(n.filterOption,c)||(n.filterOption=c),c}),h("selectionChange",function(){return n.onFilterOptionChange()}),a(35,"mat-option",17),l(36,"Wszystkie daty"),r(),a(37,"mat-option",18),l(38,"Konkretna data"),r(),a(39,"mat-option",19),l(40,"Przedzia\u0142 dat"),r()()(),f(41,Pi,8,3,"div",20)(42,Ii,15,6,"div",21),r()(),g(43,"app-reservation-list",22),r()),t&2&&(s(8),M("ngModel",n.selectedEmployeeId),s(),d("ngForOf",n.employees),s(4),M("ngModel",n.selectedStatus),s(12),M("ngModel",n.clientSearch),s(4),M("ngModel",n.offerSearch),s(5),M("ngModel",n.filterOption),s(7),d("ngIf",n.filterOption==="specificDay"),s(),d("ngIf",n.filterOption==="dateRange"),s(),d("reservations",n.filteredReservations.data))},dependencies:[Se,z,P,D,ut,U,W,N,ht,gt,_t,B,k,F,St],styles:["mat-form-field[_ngcontent-%COMP%]{flex:1;min-width:200px}.filter-controls[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:16px;align-items:center;margin-bottom:16px}.inline-date-picker[_ngcontent-%COMP%]{min-width:200px;margin-left:16px}.date-picker-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.date-button[_ngcontent-%COMP%]{border:1px solid #ccc;border-radius:4px;padding:8px 16px;cursor:pointer;background-color:#fff;color:#000}.date-button[_ngcontent-%COMP%]:hover{background-color:#f0f0f0}.snackbar-error[_ngcontent-%COMP%]{background-color:#f44336;font-weight:700;text-align:center}.date-range[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:16px}.reservation-management__title[_ngcontent-%COMP%]{font-family:Jost,sans-serif;font-size:2.4rem;font-weight:700;margin-bottom:40px}"]});let e=o;return e})();var xt=(e,o)=>{let m=Je(Be),i=Je(we);return m.getUser().pipe(tt(t=>t&&t.role==="ADMIN"?!0:(i.navigate(["/auth/login"]),!1)))};var Xe=(()=>{let o=class o extends _e{constructor(i){super(),this.modalService=i,this.offer=null,this.offerTitle="",this.offerDescription=""}ngOnInit(){this.offer&&(this.offerTitle=this.offer.title,this.offerDescription=this.offer.description)}nextConfirm(){if(this.offer)this.offer.title=this.offerTitle,this.offer.description=this.offerDescription,this.subject.next(this.offer);else{let i={title:this.offerTitle,description:this.offerDescription};this.subject.next(i)}this.modalService.close()}nextReject(){this.modalService.close()}};o.\u0275fac=function(t){return new(t||o)(u(O))},o.\u0275cmp=_({type:o,selectors:[["app-offer-form-modal"]],inputs:{offer:"offer"},features:[pe],decls:10,vars:3,consts:[["title","Dodaj lub edytuj ofert\u0119","size","md",3,"showButtons"],[1,"offer-form-modal-content"],["appearance","outline",1,"offer-form-field"],["matInput","","placeholder","Podaj tytu\u0142 oferty",3,"ngModelChange","ngModel"],["matInput","","placeholder","Podaj opis oferty",3,"ngModelChange","ngModel"]],template:function(t,n){t&1&&(a(0,"app-base-modal",0)(1,"div",1)(2,"mat-form-field",2)(3,"mat-label"),l(4,"Tytu\u0142"),r(),a(5,"input",3),S("ngModelChange",function(c){return v(n.offerTitle,c)||(n.offerTitle=c),c}),r()(),a(6,"mat-form-field",2)(7,"mat-label"),l(8,"Opis"),r(),a(9,"textarea",4),S("ngModelChange",function(c){return v(n.offerDescription,c)||(n.offerDescription=c),c}),r()()()()),t&2&&(d("showButtons",!0),s(5),M("ngModel",n.offerTitle),s(4),M("ngModel",n.offerDescription))},dependencies:[P,D,U,ge,B,k,F],styles:[".offer-form-modal-content[_ngcontent-%COMP%]{display:flex;flex-direction:column}"]});let e=o;return e})();var Ti=()=>[5,10,20];function ji(e,o){e&1&&(a(0,"th",18),l(1,"Tytu\u0142"),r())}function Li(e,o){if(e&1&&(a(0,"td",19),l(1),r()),e&2){let m=o.$implicit;s(),E(m.title)}}function Ri(e,o){e&1&&(a(0,"th",18),l(1,"Opis"),r())}function zi(e,o){if(e&1&&(a(0,"td",19),l(1),r()),e&2){let m=o.$implicit;s(),E(m.description)}}function Fi(e,o){e&1&&(a(0,"th",18),l(1,"Akcje"),r())}function Ni(e,o){if(e&1){let m=R();a(0,"td",19)(1,"button",20),h("click",function(){let t=w(m).$implicit,n=b();return x(n.editOffer(t))}),a(2,"mat-icon"),l(3,"edit"),r()(),a(4,"button",21),h("click",function(){let t=w(m).$implicit,n=b();return x(n.deleteOffer(t.id))}),a(5,"mat-icon"),l(6,"delete"),r()()()}}function Bi(e,o){e&1&&g(0,"tr",22)}function Ui(e,o){e&1&&g(0,"tr",23)}function Wi(e,o){e&1&&(a(0,"div",24),l(1," Brak danych do wy\u015Bwietlenia. "),r())}var Ot=(()=>{let o=class o{constructor(i,t,n){this.adminService=i,this.snackBar=t,this.modalService=n,this.offers=[],this.displayedColumns=["title","description","actions"],this.dataSource=new oe([]),this.selectedSort=""}ngOnInit(){this.dataSource.data=this.offers,this.paginator&&(this.dataSource.paginator=this.paginator)}ngOnChanges(){this.dataSource.data=this.offers,this.paginator&&(this.dataSource.paginator=this.paginator)}deleteOffer(i){let t=this.modalService.openModal(A);t.componentRef.instance.message="Czy na pewno chcesz usun\u0105\u0107 t\u0119 ofert\u0119?",t.subject$.subscribe(n=>{n&&this.adminService.deleteOffer(i).subscribe({next:()=>{this.snackBar.open("Oferta zosta\u0142a usuni\u0119ta","Zamknij",{duration:3e3}),this.offers=this.offers.filter(p=>p.id!==i),this.dataSource.data=[...this.offers]},error:()=>{this.snackBar.open("Nie uda\u0142o si\u0119 usun\u0105\u0107 oferty","Zamknij",{duration:3e3,panelClass:["snackbar-error"]})}})})}editOffer(i){let t=this.modalService.openModal(Xe);t.componentRef.instance.offer=be({},i),t.subject$.subscribe(n=>{n&&this.adminService.updateOffer(n).subscribe({next:p=>{let c=this.offers.findIndex(re=>re.id===p.id);c!==-1&&(this.offers[c]=p,this.dataSource.data=[...this.offers]),this.snackBar.open("Oferta zosta\u0142a zaktualizowana","Zamknij",{duration:3e3})},error:()=>{this.snackBar.open("Nie uda\u0142o si\u0119 zaktualizowa\u0107 oferty","Zamknij",{duration:3e3,panelClass:["snackbar-error"]})}})})}addOffer(){this.modalService.openModal(Xe).subject$.subscribe(t=>{t&&this.adminService.addOffer(t).subscribe({next:n=>{this.offers.push(n),this.dataSource.data=[...this.offers],this.snackBar.open("Oferta zosta\u0142a dodana","Zamknij",{duration:3e3})},error:()=>{this.snackBar.open("Nie uda\u0142o si\u0119 doda\u0107 oferty","Zamknij",{duration:3e3,panelClass:["snackbar-error"]})}})})}sortOffers(){switch(this.selectedSort){case"title":this.dataSource.data=this.offers.sort((i,t)=>i.title.localeCompare(t.title));break;case"description":this.dataSource.data=this.offers.sort((i,t)=>i.description.localeCompare(t.description));break}}};o.\u0275fac=function(t){return new(t||o)(u(L),u(T),u(O))},o.\u0275cmp=_({type:o,selectors:[["app-offer-list"]],viewQuery:function(t,n){if(t&1&&de(j,5),t&2){let p;fe(p=ue())&&(n.paginator=p.first)}},inputs:{offers:"offers"},features:[ce],decls:27,vars:10,consts:[[1,"offer-list"],[1,"offer-list__controls"],["mat-flat-button","","color","primary",1,"offer-list__btn",3,"click"],["appearance","outline",1,"offer-list__sort"],[3,"ngModelChange","selectionChange","ngModel"],["value","title"],["value","description"],[1,"mat-elevation-z8","offer-list__table-container","scrollable-table"],["mat-table","",3,"dataSource"],["matColumnDef","title"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","description"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","no-data-message",4,"ngIf"],[3,"length","pageSize","pageSizeOptions","showFirstLastButtons"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","","color","info",3,"click"],["mat-icon-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""],[1,"no-data-message"]],template:function(t,n){t&1&&(a(0,"div",0)(1,"div",1)(2,"button",2),h("click",function(){return n.addOffer()}),l(3," Dodaj now\u0105 ofert\u0119 "),r(),a(4,"mat-form-field",3)(5,"mat-label"),l(6,"Sortuj wed\u0142ug"),r(),a(7,"mat-select",4),S("ngModelChange",function(c){return v(n.selectedSort,c)||(n.selectedSort=c),c}),h("selectionChange",function(){return n.sortOffers()}),a(8,"mat-option",5),l(9,"Tytu\u0142"),r(),a(10,"mat-option",6),l(11,"Opis"),r()()()(),a(12,"div",7)(13,"table",8),C(14,9),f(15,ji,2,0,"th",10)(16,Li,2,1,"td",11),y(),C(17,12),f(18,Ri,2,0,"th",10)(19,zi,2,1,"td",11),y(),C(20,13),f(21,Fi,2,0,"th",10)(22,Ni,7,0,"td",11),y(),f(23,Bi,1,0,"tr",14)(24,Ui,1,0,"tr",15),r(),f(25,Wi,2,0,"div",16),g(26,"mat-paginator",17),r()()),t&2&&(s(7),M("ngModel",n.selectedSort),s(6),d("dataSource",n.dataSource),s(10),d("matHeaderRowDef",n.displayedColumns),s(),d("matRowDefColumns",n.displayedColumns),s(),d("ngIf",n.dataSource.data.length===0),s(),d("length",n.dataSource.data.length)("pageSize",5)("pageSizeOptions",H(9,Ti))("showFirstLastButtons",!0))},dependencies:[z,V,he,Q,P,D,W,N,q,J,ee,K,G,te,Y,X,ie,ne,j,k,F],styles:[".offer-list__controls[_ngcontent-%COMP%]{display:flex;align-items:center;flex-grow:1;flex-wrap:wrap;gap:1rem;margin-bottom:1rem}.offer-list__btn[_ngcontent-%COMP%], .offer-list__sort[_ngcontent-%COMP%]{height:56px}.offer-list[_ngcontent-%COMP%]   .no-data-message[_ngcontent-%COMP%]{text-align:center;margin:1rem 0}.scrollable-table[_ngcontent-%COMP%]{overflow-x:auto;width:100%;margin-bottom:20px}.scrollable-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;table-layout:auto}.scrollable-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .scrollable-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{white-space:nowrap;width:max-content}.scrollable-table[_ngcontent-%COMP%]::-webkit-scrollbar{height:8px}.scrollable-table[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:10px}.scrollable-table[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#888;border-radius:10px}.scrollable-table[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#555}@media (min-width: 992px){.scrollable-table[_ngcontent-%COMP%]{max-width:calc(100vw - 341px)}}"]});let e=o;return e})();var Et=(()=>{let o=class o{constructor(i,t,n){this.adminService=i,this.snackBar=t,this.modalService=n,this.offers=[]}ngOnInit(){this.loadOffers()}loadOffers(){this.adminService.getAllOffers().subscribe({next:i=>{this.offers=i},error:()=>{this.snackBar.open("Nie uda\u0142o si\u0119 pobra\u0107 ofert","Zamknij",{duration:3e3,panelClass:["snackbar-error"]})}})}onOfferDeleted(){this.loadOffers()}};o.\u0275fac=function(t){return new(t||o)(u(L),u(T),u(O))},o.\u0275cmp=_({type:o,selectors:[["app-offer-management"]],decls:5,vars:1,consts:[[1,"offer-management"],[1,"offer-management__header"],[1,"offer-management__title"],[3,"offerDeleted","offers"]],template:function(t,n){t&1&&(a(0,"div",0)(1,"div",1)(2,"h2",2),l(3,"Zarz\u0105dzanie ofertami"),r()(),a(4,"app-offer-list",3),h("offerDeleted",function(){return n.onOfferDeleted()}),r()()),t&2&&(s(4),d("offers",n.offers))},dependencies:[Ot],styles:[".offer-management__title[_ngcontent-%COMP%]{font-family:Jost,sans-serif;font-size:2.4rem;font-weight:700;margin-bottom:40px}.offer-management__btn[_ngcontent-%COMP%]{margin-bottom:20px}"]});let e=o;return e})();var et=(()=>{let o=class o extends _e{constructor(i){super(),this.modalService=i,this.employee=null,this.firstName="",this.lastName="",this.phoneNumber=""}ngOnInit(){this.employee&&(this.firstName=this.employee.firstName,this.lastName=this.employee.lastName,this.phoneNumber=this.employee.phoneNumber)}nextConfirm(){if(this.employee)this.employee.firstName=this.firstName,this.employee.lastName=this.lastName,this.employee.phoneNumber=this.phoneNumber,this.subject.next(this.employee);else{let i={firstName:this.firstName,lastName:this.lastName,phoneNumber:this.phoneNumber};this.subject.next(i)}this.modalService.close()}nextReject(){this.modalService.close()}};o.\u0275fac=function(t){return new(t||o)(u(O))},o.\u0275cmp=_({type:o,selectors:[["app-employee-form-modal"]],inputs:{employee:"employee"},features:[pe],decls:14,vars:5,consts:[["size","md",3,"title","showButtons"],[1,"employee-form-modal-content"],["appearance","outline",1,"employee-form-field"],["matInput","","placeholder","Podaj imi\u0119 pracownika",3,"ngModelChange","ngModel"],["matInput","","placeholder","Podaj nazwisko pracownika",3,"ngModelChange","ngModel"],["matInput","","placeholder","Podaj numer telefonu pracownika",3,"ngModelChange","ngModel"]],template:function(t,n){t&1&&(a(0,"app-base-modal",0)(1,"div",1)(2,"mat-form-field",2)(3,"mat-label"),l(4,"Imi\u0119"),r(),a(5,"input",3),S("ngModelChange",function(c){return v(n.firstName,c)||(n.firstName=c),c}),r()(),a(6,"mat-form-field",2)(7,"mat-label"),l(8,"Nazwisko"),r(),a(9,"input",4),S("ngModelChange",function(c){return v(n.lastName,c)||(n.lastName=c),c}),r()(),a(10,"mat-form-field",2)(11,"mat-label"),l(12,"Numer telefonu"),r(),a(13,"input",5),S("ngModelChange",function(c){return v(n.phoneNumber,c)||(n.phoneNumber=c),c}),r()()()()),t&2&&(d("title",n.employee?"Edytuj pracownika":"Dodaj nowego pracownika")("showButtons",!0),s(5),M("ngModel",n.firstName),s(4),M("ngModel",n.lastName),s(4),M("ngModel",n.phoneNumber))},dependencies:[P,D,U,ge,B,k,F],styles:[".employee-form-modal-content[_ngcontent-%COMP%]{display:flex;flex-direction:column}"]});let e=o;return e})();var Ai=()=>[5,10,20];function Zi(e,o){e&1&&(a(0,"th",19),l(1,"Imi\u0119"),r())}function $i(e,o){if(e&1&&(a(0,"td",20),l(1),r()),e&2){let m=o.$implicit;s(),E(m.firstName)}}function Hi(e,o){e&1&&(a(0,"th",19),l(1,"Nazwisko"),r())}function Qi(e,o){if(e&1&&(a(0,"td",20),l(1),r()),e&2){let m=o.$implicit;s(),E(m.lastName)}}function qi(e,o){e&1&&(a(0,"th",19),l(1,"Numer telefonu"),r())}function Gi(e,o){if(e&1&&(a(0,"td",20),l(1),r()),e&2){let m=o.$implicit;s(),E(m.phoneNumber)}}function Ji(e,o){e&1&&(a(0,"th",19),l(1,"Akcje"),r())}function Ki(e,o){if(e&1){let m=R();a(0,"td",20)(1,"button",21),h("click",function(){let t=w(m).$implicit,n=b();return x(n.editEmployee(t))}),a(2,"mat-icon"),l(3,"edit"),r()(),a(4,"button",22),h("click",function(){let t=w(m).$implicit,n=b();return x(n.deleteEmployee(t.id))}),a(5,"mat-icon"),l(6,"delete"),r()()()}}function Yi(e,o){e&1&&g(0,"tr",23)}function Xi(e,o){e&1&&g(0,"tr",24)}function en(e,o){e&1&&(a(0,"div",25),l(1," Brak danych do wy\u015Bwietlenia. "),r())}var kt=(()=>{let o=class o{constructor(i,t,n){this.adminService=i,this.snackBar=t,this.modalService=n,this.employees=[],this.displayedColumns=["firstName","lastName","phoneNumber","actions"],this.dataSource=new oe([]),this.selectedSort=""}ngOnInit(){this.dataSource.data=this.employees,this.paginator&&(this.dataSource.paginator=this.paginator)}ngOnChanges(){this.dataSource.data=this.employees,this.paginator&&(this.dataSource.paginator=this.paginator)}deleteEmployee(i){let t=this.modalService.openModal(A);t.componentRef.instance.message="Czy na pewno chcesz usun\u0105\u0107 tego pracownika?",t.subject$.subscribe(n=>{n&&this.adminService.deleteEmployee(i).subscribe({next:()=>{this.snackBar.open("Pracownik zosta\u0142 usuni\u0119ty","Zamknij",{duration:3e3}),this.employees=this.employees.filter(p=>p.id!==i),this.dataSource.data=[...this.employees]},error:()=>{this.snackBar.open("Nie uda\u0142o si\u0119 usun\u0105\u0107 pracownika","Zamknij",{duration:3e3,panelClass:["snackbar-error"]})}})})}editEmployee(i){let t=this.modalService.openModal(et);t.componentRef.instance.employee=be({},i),t.subject$.subscribe(n=>{n&&this.adminService.updateEmployee(n).subscribe({next:p=>{let c=this.employees.findIndex(re=>re.id===p.id);c!==-1&&(this.employees[c]=p,this.dataSource.data=[...this.employees]),this.snackBar.open("Pracownik zosta\u0142 zaktualizowany","Zamknij",{duration:3e3})},error:()=>{this.snackBar.open("Nie uda\u0142o si\u0119 zaktualizowa\u0107 pracownika","Zamknij",{duration:3e3,panelClass:["snackbar-error"]})}})})}addEmployee(){this.modalService.openModal(et).subject$.subscribe(t=>{t&&this.adminService.addEmployee(t).subscribe({next:n=>{this.employees.push(n),this.dataSource.data=[...this.employees],this.snackBar.open("Pracownik zosta\u0142 dodany","Zamknij",{duration:3e3})},error:()=>{this.snackBar.open("Nie uda\u0142o si\u0119 doda\u0107 pracownika","Zamknij",{duration:3e3,panelClass:["snackbar-error"]})}})})}sortEmployees(){switch(this.selectedSort){case"firstName":this.dataSource.data=this.employees.sort((i,t)=>i.firstName.localeCompare(t.firstName));break;case"lastName":this.dataSource.data=this.employees.sort((i,t)=>i.lastName.localeCompare(t.lastName));break}}};o.\u0275fac=function(t){return new(t||o)(u(L),u(T),u(O))},o.\u0275cmp=_({type:o,selectors:[["app-employee-list"]],viewQuery:function(t,n){if(t&1&&de(j,5),t&2){let p;fe(p=ue())&&(n.paginator=p.first)}},inputs:{employees:"employees"},features:[ce],decls:30,vars:10,consts:[[1,"employee-list"],[1,"employee-list__controls"],["mat-flat-button","","color","primary",1,"employee-list__btn",3,"click"],["appearance","outline",1,"employee-list__sort"],[3,"ngModelChange","selectionChange","ngModel"],["value","firstName"],["value","lastName"],[1,"mat-elevation-z8","employee-list__table-container","scrollable-table"],["mat-table","",3,"dataSource"],["matColumnDef","firstName"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","lastName"],["matColumnDef","phoneNumber"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","no-data-message",4,"ngIf"],[3,"length","pageSize","pageSizeOptions","showFirstLastButtons"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","","color","info",3,"click"],["mat-icon-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""],[1,"no-data-message"]],template:function(t,n){t&1&&(a(0,"div",0)(1,"div",1)(2,"button",2),h("click",function(){return n.addEmployee()}),l(3," Dodaj nowego pracownika "),r(),a(4,"mat-form-field",3)(5,"mat-label"),l(6,"Sortuj wed\u0142ug"),r(),a(7,"mat-select",4),S("ngModelChange",function(c){return v(n.selectedSort,c)||(n.selectedSort=c),c}),h("selectionChange",function(){return n.sortEmployees()}),a(8,"mat-option",5),l(9,"Imi\u0119"),r(),a(10,"mat-option",6),l(11,"Nazwisko"),r()()()(),a(12,"div",7)(13,"table",8),C(14,9),f(15,Zi,2,0,"th",10)(16,$i,2,1,"td",11),y(),C(17,12),f(18,Hi,2,0,"th",10)(19,Qi,2,1,"td",11),y(),C(20,13),f(21,qi,2,0,"th",10)(22,Gi,2,1,"td",11),y(),C(23,14),f(24,Ji,2,0,"th",10)(25,Ki,7,0,"td",11),y(),f(26,Yi,1,0,"tr",15)(27,Xi,1,0,"tr",16),r(),f(28,en,2,0,"div",17),g(29,"mat-paginator",18),r()()),t&2&&(s(7),M("ngModel",n.selectedSort),s(6),d("dataSource",n.dataSource),s(13),d("matHeaderRowDef",n.displayedColumns),s(),d("matRowDefColumns",n.displayedColumns),s(),d("ngIf",n.dataSource.data.length===0),s(),d("length",n.dataSource.data.length)("pageSize",5)("pageSizeOptions",H(9,Ai))("showFirstLastButtons",!0))},dependencies:[z,V,he,Q,P,D,W,N,q,J,ee,K,G,te,Y,X,ie,ne,j,k,F],styles:[".employee-list__controls[_ngcontent-%COMP%]{display:flex;align-items:center;flex-grow:1;flex-wrap:wrap;gap:1rem;margin-bottom:1rem}.employee-list__btn[_ngcontent-%COMP%], .employee-list__sort[_ngcontent-%COMP%]{height:56px}.employee-list[_ngcontent-%COMP%]   .no-data-message[_ngcontent-%COMP%]{text-align:center;margin:1rem 0}.scrollable-table[_ngcontent-%COMP%]{overflow-x:auto;width:100%;margin-bottom:20px}.scrollable-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;table-layout:auto}.scrollable-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .scrollable-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{white-space:nowrap;width:max-content}.scrollable-table[_ngcontent-%COMP%]::-webkit-scrollbar{height:8px}.scrollable-table[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:10px}.scrollable-table[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#888;border-radius:10px}.scrollable-table[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#555}@media (min-width: 992px){.scrollable-table[_ngcontent-%COMP%]{max-width:calc(100vw - 341px)}}"]});let e=o;return e})();var Dt=(()=>{let o=class o{constructor(i,t,n){this.adminService=i,this.snackBar=t,this.modalService=n,this.employees=[]}ngOnInit(){this.loadEmployees()}loadEmployees(){this.adminService.getEmployeesDetails().subscribe({next:i=>{this.employees=i},error:()=>{this.snackBar.open("Nie uda\u0142o si\u0119 pobra\u0107 listy pracownik\xF3w","Zamknij",{duration:3e3,panelClass:["snackbar-error"]})}})}onEmployeeDeleted(){this.loadEmployees()}};o.\u0275fac=function(t){return new(t||o)(u(L),u(T),u(O))},o.\u0275cmp=_({type:o,selectors:[["app-employee-management"]],decls:5,vars:1,consts:[[1,"employee-management"],[1,"employee-management__header"],[1,"employee-management__title"],[3,"employeeDeleted","employees"]],template:function(t,n){t&1&&(a(0,"div",0)(1,"div",1)(2,"h2",2),l(3,"Zarz\u0105dzanie pracownikami"),r()(),a(4,"app-employee-list",3),h("employeeDeleted",function(){return n.onEmployeeDeleted()}),r()()),t&2&&(s(4),d("employees",n.employees))},dependencies:[kt],styles:[".employee-management__title[_ngcontent-%COMP%]{font-family:Jost,sans-serif;font-size:2.4rem;font-weight:700;margin-bottom:40px}"]});let e=o;return e})();var Ge=(()=>{let o=class o{constructor(i){this.http=i,this.apiUrl="/api/employee/offer"}getEmployeeOffers(i){return this.http.get(`/api/employee/offer/${i}/details`)}addEmployeeOffer(i){return this.http.post(this.apiUrl,i)}updateEmployeeOffer(i,t){return this.http.put(`${this.apiUrl}/${i}`,t)}deleteEmployeeOffer(i){return this.http.delete(`${this.apiUrl}/${i}`)}getAvailableOffersForEmployee(i){return this.http.get(`${this.apiUrl}/${i}/available-offers`)}};o.\u0275fac=function(t){return new(t||o)(Re(Ne))},o.\u0275prov=je({token:o,factory:o.\u0275fac,providedIn:"root"});let e=o;return e})();function nn(e,o){if(e&1&&(a(0,"mat-option",10),l(1),r()),e&2){let m=o.$implicit;d("value",m.id),s(),$(" ",m.title," ")}}function on(e,o){e&1&&(a(0,"mat-error"),l(1," Musisz wybra\u0107 ofert\u0119. "),r())}function an(e,o){e&1&&(a(0,"mat-error"),l(1," Cena jest wymagana i nie mo\u017Ce by\u0107 mniejsza ni\u017C 0. "),r())}function rn(e,o){e&1&&(a(0,"mat-error"),l(1," Czas trwania jest wymagany i musi zawiera\u0107 tylko cyfry. "),r())}function ln(e,o){if(e&1){let m=R();a(0,"form",3),h("ngSubmit",function(){w(m);let t=b();return x(t.nextConfirm())}),a(1,"mat-form-field",4)(2,"mat-label"),l(3,"Wybierz ofert\u0119"),r(),a(4,"mat-select",5),f(5,nn,2,2,"mat-option",6),r(),f(6,on,2,0,"mat-error",7),r(),a(7,"mat-form-field",4)(8,"mat-label"),l(9,"Cena"),r(),g(10,"input",8),f(11,an,2,0,"mat-error",7),r(),a(12,"mat-form-field",4)(13,"mat-label"),l(14,"Czas trwania (minuty)"),r(),g(15,"input",9),f(16,rn,2,0,"mat-error",7),r()()}if(e&2){let m,i,t,n=b();d("formGroup",n.offerForm),s(5),d("ngForOf",n.availableOffers),s(),d("ngIf",(m=n.offerForm.get("offerId"))==null?null:m.invalid),s(5),d("ngIf",(i=n.offerForm.get("price"))==null?null:i.invalid),s(5),d("ngIf",(t=n.offerForm.get("time"))==null?null:t.invalid)}}function sn(e,o){if(e&1){let m=R();a(0,"div",11)(1,"p"),l(2," Brak mo\u017Cliwo\u015Bci dodania nowej oferty. Najpierw dodaj ofert\u0119 do systemu, aby przydzieli\u0107 j\u0105 pracownikowi. "),r(),a(3,"button",12),h("click",function(){w(m);let t=b();return x(t.redirectToOfferManagement())}),l(4," Dodaj ofert\u0119 "),r()()}}var It=(()=>{let o=class o extends _e{constructor(i,t,n,p){super(),this.formBuilder=i,this.modalService=t,this.employeeOfferService=n,this.router=p,this.employeeId=null,this.availableOffers=[],this.subject=new Te,this.subject$=this.subject.asObservable(),this.offerForm=this.formBuilder.group({offerId:[null,Z.required],price:[null,[Z.required,Z.min(0)]],time:["",[Z.required,Z.pattern(/^[0-9]+$/)]]})}ngOnInit(){this.employeeId!==null&&this.loadAvailableOffers()}loadAvailableOffers(){this.employeeId!==null&&this.employeeOfferService.getAvailableOffersForEmployee(this.employeeId).subscribe({next:i=>{this.availableOffers=i},error:()=>{console.error("Nie uda\u0142o si\u0119 pobra\u0107 dost\u0119pnych ofert")}})}nextConfirm(){if(this.offerForm.invalid)return;let i=this.offerForm.getRawValue(),t={employeeId:this.employeeId,offerId:i.offerId,price:i.price,time:i.time};this.subject.next(t),this.modalService.close()}nextReject(){this.subject.next(!1),this.modalService.close()}redirectToOfferManagement(){this.modalService.close(),this.router.navigate(["/admin/offer-management"])}};o.\u0275fac=function(t){return new(t||o)(u($e),u(O),u(Ge),u(we))},o.\u0275cmp=_({type:o,selectors:[["app-add-employee-offer-modal"]],inputs:{employeeId:"employeeId"},features:[pe],decls:4,vars:3,consts:[["noOffersTemplate",""],["title","Dodaj now\u0105 ofert\u0119","size","md",3,"showButtons"],[3,"formGroup","ngSubmit",4,"ngIf","ngIfElse"],[3,"ngSubmit","formGroup"],["appearance","outline"],["formControlName","offerId","required",""],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["matInput","","type","number","formControlName","price"],["matInput","","type","number","formControlName","time"],[3,"value"],[1,"no-offers-message"],["mat-flat-button","","color","primary",3,"click"]],template:function(t,n){if(t&1&&(a(0,"app-base-modal",1),f(1,ln,17,5,"form",2)(2,sn,5,0,"ng-template",null,0,ot),r()),t&2){let p=Me(3);d("showButtons",!0),s(),d("ngIf",n.availableOffers.length>0)("ngIfElse",p)}},dependencies:[Se,z,he,P,D,He,U,W,N,ge,We,B,Ve,k,Ue,pt,Ae,Ze],styles:["form[_ngcontent-%COMP%]{display:flex;flex-direction:column}"]});let e=o;return e})();function mn(e,o){e&1&&(a(0,"mat-error"),l(1," Cena jest wymagana. "),r())}function cn(e,o){e&1&&(a(0,"mat-error"),l(1," Cena nie mo\u017Ce by\u0107 mniejsza ni\u017C 0. "),r())}function pn(e,o){e&1&&(a(0,"mat-error"),l(1," Czas trwania jest wymagany. "),r())}function dn(e,o){e&1&&(a(0,"mat-error"),l(1," Czas trwania musi by\u0107 liczb\u0105. "),r())}var Tt=(()=>{let o=class o extends _e{constructor(i,t){super(),this.formBuilder=i,this.modalService=t,this.offer=null,this.subject=new Te,this.subject$=this.subject.asObservable(),this.offerForm=this.formBuilder.group({price:[null,[Z.required,Z.min(0)]],time:["",[Z.required,Z.pattern(/^[0-9]+$/)]]})}ngOnInit(){this.offer&&this.offerForm.patchValue({price:this.offer.price,time:this.offer.time})}nextConfirm(){if(this.offerForm.invalid)return;let i=this.offerForm.getRawValue();this.offer&&(this.offer.price=i.price,this.offer.time=i.time,this.subject.next(this.offer)),this.modalService.close()}nextReject(){this.subject.next(!1),this.modalService.close()}};o.\u0275fac=function(t){return new(t||o)(u($e),u(O))},o.\u0275cmp=_({type:o,selectors:[["app-edit-employee-offer-modal"]],inputs:{offer:"offer"},features:[pe],decls:14,vars:6,consts:[["title","Edytuj ofert\u0119","size","sm",3,"showButtons"],[3,"formGroup"],["appearance","outline"],["matInput","","formControlName","price","type","number"],[4,"ngIf"],["matInput","","formControlName","time","type","text"]],template:function(t,n){if(t&1&&(a(0,"app-base-modal",0)(1,"form",1)(2,"mat-form-field",2)(3,"mat-label"),l(4,"Cena"),r(),g(5,"input",3),f(6,mn,2,0,"mat-error",4)(7,cn,2,0,"mat-error",4),r(),a(8,"mat-form-field",2)(9,"mat-label"),l(10,"Czas trwania (minuty)"),r(),g(11,"input",5),f(12,pn,2,0,"mat-error",4)(13,dn,2,0,"mat-error",4),r()()()),t&2){let p,c,re,De;d("showButtons",!0),s(),d("formGroup",n.offerForm),s(5),d("ngIf",(p=n.offerForm.get("price"))==null?null:p.hasError("required")),s(),d("ngIf",(c=n.offerForm.get("price"))==null?null:c.hasError("min")),s(5),d("ngIf",(re=n.offerForm.get("time"))==null?null:re.hasError("required")),s(),d("ngIf",(De=n.offerForm.get("time"))==null?null:De.hasError("pattern"))}},dependencies:[z,P,D,He,U,ge,We,B,Ve,k,Ue,Ae,Ze],styles:["form[_ngcontent-%COMP%]{display:flex;flex-direction:column}"]});let e=o;return e})();var jt=()=>["title","price","time","actions"],fn=()=>[5,10,20];function un(e,o){e&1&&(a(0,"th",12),l(1,"Tytu\u0142 us\u0142ugi"),r())}function hn(e,o){if(e&1&&(a(0,"td",13),l(1),r()),e&2){let m=o.$implicit;s(),E(m.title)}}function gn(e,o){e&1&&(a(0,"th",12),l(1,"Cena"),r())}function _n(e,o){if(e&1&&(a(0,"td",13),l(1),Fe(2,"currency"),r()),e&2){let m=o.$implicit;s(),$(" ",nt(2,1,m.price,"PLN","symbol","1.2-2")," ")}}function Cn(e,o){e&1&&(a(0,"th",12),l(1,"Czas trwania"),r())}function yn(e,o){if(e&1&&(a(0,"td",13),l(1),r()),e&2){let m=o.$implicit;s(),E(m.time)}}function bn(e,o){e&1&&(a(0,"th",12),l(1,"Akcje"),r())}function Mn(e,o){if(e&1){let m=R();a(0,"td",13)(1,"button",14),h("click",function(){let t=w(m).$implicit,n=b();return x(n.editOffer(t))}),a(2,"mat-icon"),l(3,"edit"),r()(),a(4,"button",15),h("click",function(){let t=w(m).$implicit,n=b();return x(n.deleteOffer(t.id))}),a(5,"mat-icon"),l(6,"delete"),r()()()}}function vn(e,o){e&1&&g(0,"tr",16)}function Sn(e,o){e&1&&g(0,"tr",17)}function wn(e,o){e&1&&(a(0,"div",18),l(1," Brak ofert do wy\u015Bwietlenia. "),r())}var Lt=(()=>{let o=class o{constructor(){this.offers=[],this.offerDeleted=new Pe,this.offerEdited=new Pe}deleteOffer(i){this.offerDeleted.emit(i)}editOffer(i){this.offerEdited.emit(i)}};o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=_({type:o,selectors:[["app-employee-offer-list"]],inputs:{offers:"offers"},outputs:{offerDeleted:"offerDeleted",offerEdited:"offerEdited"},decls:18,vars:11,consts:[[1,"employee-offer-table","scrollable-table","mat-elevation-z8"],["mat-table","",3,"dataSource"],["matColumnDef","title"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","price"],["matColumnDef","time"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","no-data-message",4,"ngIf"],[3,"length","pageSize","pageSizeOptions","showFirstLastButtons"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","","color","info",3,"click"],["mat-icon-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""],[1,"no-data-message"]],template:function(t,n){t&1&&(a(0,"div",0)(1,"table",1),C(2,2),f(3,un,2,0,"th",3)(4,hn,2,1,"td",4),y(),C(5,5),f(6,gn,2,0,"th",3)(7,_n,3,6,"td",4),y(),C(8,6),f(9,Cn,2,0,"th",3)(10,yn,2,1,"td",4),y(),C(11,7),f(12,bn,2,0,"th",3)(13,Mn,7,0,"td",4),y(),f(14,vn,1,0,"tr",8)(15,Sn,1,0,"tr",9),r(),f(16,wn,2,0,"div",10),g(17,"mat-paginator",11),r()),t&2&&(s(),d("dataSource",n.offers),s(13),d("matHeaderRowDef",H(8,jt)),s(),d("matRowDefColumns",H(9,jt)),s(),d("ngIf",n.offers.length===0),s(),d("length",n.offers.length)("pageSize",5)("pageSizeOptions",H(10,fn))("showFirstLastButtons",!0))},dependencies:[z,V,Q,q,J,ee,K,G,te,Y,X,ie,ne,j,rt],styles:[".scrollable-table[_ngcontent-%COMP%]{overflow-x:auto;width:100%;margin-bottom:20px}.scrollable-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;table-layout:auto}.scrollable-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .scrollable-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{white-space:nowrap;width:max-content}.scrollable-table[_ngcontent-%COMP%]::-webkit-scrollbar{height:8px}.scrollable-table[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:10px}.scrollable-table[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#888;border-radius:10px}.scrollable-table[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#555}.no-data-message[_ngcontent-%COMP%]{text-align:center;margin:1rem 0}@media (min-width: 992px){.scrollable-table[_ngcontent-%COMP%]{max-width:calc(100vw - 341px)}}"]});let e=o;return e})();function On(e,o){if(e&1&&(a(0,"mat-option",12),l(1),r()),e&2){let m=o.$implicit;d("value",m.id),s(),ve(" ",m.firstName," ",m.lastName," ")}}var Rt=(()=>{let o=class o{constructor(i,t,n,p){this.employeeOfferService=i,this.adminService=t,this.snackBar=n,this.modalService=p,this.employeeOffers=[],this.filteredEmployeeOffers=[],this.employees=[],this.selectedEmployeeId=null,this.offerSearch="",this.selectedSort=""}ngOnInit(){this.loadEmployees()}loadEmployees(){this.adminService.getEmployees().subscribe({next:i=>{this.employees=i,i.length>0&&(this.selectedEmployeeId=i[0].id,this.fetchEmployeeOffers())},error:()=>{this.snackBar.open("Nie uda\u0142o si\u0119 pobra\u0107 pracownik\xF3w","Zamknij",{duration:3e3})}})}fetchEmployeeOffers(){this.selectedEmployeeId!==null&&this.employeeOfferService.getEmployeeOffers(this.selectedEmployeeId).subscribe({next:i=>{this.employeeOffers=i,this.applyFilters()},error:()=>{this.snackBar.open("Nie uda\u0142o si\u0119 pobra\u0107 ofert pracownika","Zamknij",{duration:3e3})}})}applyFilters(){this.filteredEmployeeOffers=this.employeeOffers.filter(i=>{let t=!0;return this.offerSearch&&(t=i.title.toLowerCase().includes(this.offerSearch.toLowerCase())),t}),this.sortOffers()}sortOffers(){this.selectedSort&&(this.filteredEmployeeOffers=[...this.filteredEmployeeOffers].sort((i,t)=>{let n=this.selectedSort;return typeof i[n]=="number"&&typeof t[n]=="number"?i[n]-t[n]:typeof i[n]=="string"&&typeof t[n]=="string"?i[n].localeCompare(t[n]):0}))}addEmployeeOffer(){if(this.selectedEmployeeId===null)return;let i=this.modalService.openModal(It);i.componentRef.instance.employeeId=this.selectedEmployeeId,i.subject$.subscribe(t=>{t&&this.employeeOfferService.addEmployeeOffer(t).subscribe({next:()=>{this.fetchEmployeeOffers(),this.snackBar.open("Oferta zosta\u0142a dodana","Zamknij",{duration:3e3})},error:()=>{this.snackBar.open("Nie uda\u0142o si\u0119 doda\u0107 oferty","Zamknij",{duration:3e3})}})})}onOfferDeleted(i){let t=this.modalService.openModal(A);t.componentRef.instance.message="Czy na pewno chcesz usun\u0105\u0107 t\u0119 ofert\u0119?",t.subject$.subscribe(n=>{n&&this.employeeOfferService.deleteEmployeeOffer(i).subscribe({next:()=>{this.fetchEmployeeOffers(),this.snackBar.open("Oferta zosta\u0142a usuni\u0119ta","Zamknij",{duration:3e3})},error:()=>{this.snackBar.open("Nie uda\u0142o si\u0119 usun\u0105\u0107 oferty","Zamknij",{duration:3e3})}})})}onOfferEdited(i){let t=this.modalService.openModal(Tt);t.componentRef.instance.offer=be({},i),t.subject$.subscribe(n=>{n&&(n.employeeId=i.employeeId,n.offerId=i.offerId,this.employeeOfferService.updateEmployeeOffer(i.id,n).subscribe({next:()=>{this.fetchEmployeeOffers(),this.snackBar.open("Oferta zosta\u0142a zaktualizowana","Zamknij",{duration:3e3})},error:()=>{this.snackBar.open("Nie uda\u0142o si\u0119 zaktualizowa\u0107 oferty","Zamknij",{duration:3e3})}}))})}};o.\u0275fac=function(t){return new(t||o)(u(Ge),u(L),u(T),u(O))},o.\u0275cmp=_({type:o,selectors:[["app-employee-offer-management"]],decls:26,vars:5,consts:[[1,"employee-offer-management__header"],[1,"employee-offer-management__title"],[1,"employee-offer-management__controls"],["mat-flat-button","","color","primary",1,"employee-offer-management__controls-item",3,"click"],["appearance","outline",1,"employee-offer-management__controls-item"],[3,"ngModelChange","selectionChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["matInput","","placeholder","Wpisz nazw\u0119 us\u0142ugi",3,"ngModelChange","ngModel"],["value","title"],["value","price"],["value","time"],[3,"offerDeleted","offerEdited","offers"],[3,"value"]],template:function(t,n){t&1&&(a(0,"div",0)(1,"h2",1),l(2," Zarz\u0105dzanie ofertami pracownik\xF3w "),r(),a(3,"div",2)(4,"button",3),h("click",function(){return n.addEmployeeOffer()}),l(5," Dodaj now\u0105 ofert\u0119 "),r(),a(6,"mat-form-field",4)(7,"mat-label"),l(8,"Wybierz pracownika"),r(),a(9,"mat-select",5),S("ngModelChange",function(c){return v(n.selectedEmployeeId,c)||(n.selectedEmployeeId=c),c}),h("selectionChange",function(){return n.fetchEmployeeOffers()}),f(10,On,2,3,"mat-option",6),r()(),a(11,"mat-form-field",4)(12,"mat-label"),l(13,"Filtruj po nazwie us\u0142ugi"),r(),a(14,"input",7),S("ngModelChange",function(c){return v(n.offerSearch,c)||(n.offerSearch=c),c}),h("ngModelChange",function(){return n.applyFilters()}),r()(),a(15,"mat-form-field",4)(16,"mat-label"),l(17,"Sortuj wed\u0142ug"),r(),a(18,"mat-select",5),S("ngModelChange",function(c){return v(n.selectedSort,c)||(n.selectedSort=c),c}),h("selectionChange",function(){return n.sortOffers()}),a(19,"mat-option",8),l(20,"Tytu\u0142 us\u0142ugi"),r(),a(21,"mat-option",9),l(22,"Cena"),r(),a(23,"mat-option",10),l(24,"Czas trwania"),r()()()()(),a(25,"app-employee-offer-list",11),h("offerDeleted",function(c){return n.onOfferDeleted(c)})("offerEdited",function(c){return n.onOfferEdited(c)}),r()),t&2&&(s(9),M("ngModel",n.selectedEmployeeId),s(),d("ngForOf",n.employees),s(4),M("ngModel",n.offerSearch),s(4),M("ngModel",n.selectedSort),s(7),d("offers",n.filteredEmployeeOffers))},dependencies:[Se,he,P,D,U,W,N,B,k,F,Lt],styles:[".employee-offer-management__controls[_ngcontent-%COMP%]{display:flex;align-items:center;flex-grow:1;flex-wrap:wrap;gap:1rem;margin-bottom:1rem}.employee-offer-management__title[_ngcontent-%COMP%]{font-family:Jost,sans-serif;font-size:2.4rem;font-weight:700;margin-bottom:40px}.employee-offer-management__controls-item[_ngcontent-%COMP%]{height:56px;flex-grow:1}"]});let e=o;return e})();var En=[{path:"",component:yt,canActivate:[xt],children:[{path:"",redirectTo:"user-management",pathMatch:"full"},{path:"user-management",component:vt},{path:"reservation-management",component:wt},{path:"offer-management",component:Et},{path:"employee-management",component:Dt},{path:"employee-offer-management",component:Rt}]}],zt=(()=>{let o=class o{};o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=ze({type:o}),o.\u0275inj=Le({imports:[Ke.forChild(En),Ke]});let e=o;return e})();var ba=(()=>{let o=class o{};o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=ze({type:o}),o.\u0275inj=Le({imports:[lt,zt,Ct,ft,dt]});let e=o;return e})();export{ba as AdminModule};
